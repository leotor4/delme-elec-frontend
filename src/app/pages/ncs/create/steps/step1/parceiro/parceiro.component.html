<p-dialog [(visible)]="display">
  <ng-template pTemplate="header">
    <div class="cabecalho">
      <h1>Editar Contato do Parceiro</h1>
      <p>Preecha os campos abaixo.</p>
    </div>
  </ng-template>

  <div class="editar-campo">
    <label for="">Nome</label>
    <input type="text" [(ngModel)]="nonComplicanceService.editarNomeItem" />
  </div>
  <div class="editar-campo">
    <label for="">Telefone</label>
    <input type="text" [(ngModel)]="nonComplicanceService.editarTelefoneItem" />
  </div>
  <div class="editar-campo">
    <label for="">E-mail</label>
    <input type="text" [(ngModel)]="nonComplicanceService.editarEmailItem" />
  </div>
  <div class="d-flex justify-content-end editar-buttons">
    <button type="button" class="btn btn-outline-dark" (click)="hideDialog()">
      Cancelar
    </button>
    <div class="ml-2 mr-2"></div>
    <button type="button" class="btn btn-dark" (click)="editar()">
      Confirmar <i class="pi pi-check"></i>
    </button>
  </div>
</p-dialog>

<div class="row mb-0">
  <div class="d-flex col">
    <div class="cabecalho p-0 m-0">
      <h1>Dados do Parceiro</h1>
      <p>
        Identifique o parceiro responsável pelo produto nesta NC.
        <br>
        Caso não encontre o parceiro, atualize a base de cadastros.
      </p>
    </div>
    <div class="col-2" id="div-att-col2">
      <p>
        <i class="pi pi-history"> </i>Última atualização: {{ returnUpdateTime() }}
      </p>
      <a
              href="http://localhost:4200/ncs/import"
              role="button"
              class="btn btn-dark"
      >
        Atualizar Cadastros
        <i class="pi pi-download" id="icon-button"></i>
      </a>
    </div>
  </div>
  </div>



<div class=" row-search d-flex mb-2 pl-0">
  <div class="dropdown col ml-0 mt-0 px-0">
    <label>Tipo de Parceiro</label>
    <select
      [(ngModel)]="nonComplicanceService.nc.tipos_parceiro_item"
      (change)="onChange()"
    >
      <option [ngValue]="null" disabled selected hidden>Selecione...</option>
      <option *ngFor="let tiposAuditoria of tiposParceiro">
        {{ tiposAuditoria }}
      </option>
    </select>
  </div>

  <div class="ml-0 col-search col-7 px-0">
    <div class="d-flex justify-content-start" style="width: 100%">
      <p-autoComplete
        [(ngModel)]="nonComplicanceService.pesquisar"
        [suggestions]="results"
        (completeMethod)="search($event)"
        (onSelect)="onSelected()"
        (ngModelChange)="onChangeAutoComplete()"
        [style]="{ width: '100%' }"
        [inputStyle]="{ width: '100%' }"
        class="p-autocomplete"
        placeholder="Busque por código SAP ou razão social..."
        field="name"
      >
        <ng-template let-brand pTemplate="item">
          <div>
            <span class="auto-complete-title">{{ brand.corporate_name }}</span>
            <div class="d-flex justify-content-between">
              <div>
                <span class="auto-complete-label">CÓDIGO</span><br />
                <span class="auto-complete-item">{{ brand.code }}</span>
              </div>
              <div>
                <span class="auto-complete-label">NOME DO CONTATO</span><br />
                <span class="auto-complete-item">{{
                  brand.responsible_name
                }}</span>
              </div>
              <div>
                <span class="auto-complete-label">E-MAIL</span><br />
                <span class="auto-complete-item">{{
                  brand.responsible_email
                }}</span>
              </div>
              <div>
                <span class="auto-complete-label">TELEFONE</span><br />
                <span class="auto-complete-item">{{
                  brand.responsible_phone
                }}</span>
              </div>
            </div>
          </div>
        </ng-template>
      </p-autoComplete>
    </div>
  </div>
</div>

<div *ngIf="!hasSelected()">
  <app-waiting-product></app-waiting-product>
</div>

<div class="div-ident-parceiro pr-4 pb-0 " *ngIf="hasSelected()">
  <div class="dados-parceiro razao-social py-0 py-1">
    <h1 *ngIf="!isInterno()">Razão Social</h1>
    <h1 *ngIf="isInterno()">Setor</h1>
    <p>
      {{ nonComplicanceService.nc.partner.corporate_name }}
    </p>
    <p>
      {{ nonComplicanceService.nc.partner.name }}
    </p>
  </div>
  <div class="dados-parceiro py-2">
    <div class="dados-contato ">
      <div class="d-flex justify-content-between">
        <h1>Dados do Contato</h1>
        <button
          type="button"
          class="btn btn-dark"
          iconPos="left"
          (click)="showDialog()"
        >
          <i class="pi pi-pencil"></i>Editar Contato
        </button>
      </div>
      <div class="d-flex justify-content-evenly">
        <div class="contato-info d-flex flex-row">
          <i class="pi pi-user"></i>
          <div>
            <span class="info-titulo">Nome</span>
            <br />
            <span class="info-dados">{{
              nonComplicanceService.nc.partner.responsible_name
              }}</span>
          </div>
        </div>
        <div class="contato-info d-flex flex-row">
          <i class="pi pi-phone"></i>
          <div>
            <span class="info-titulo">Telefone</span>
            <br />
            <span class="info-dados">{{
              nonComplicanceService.nc.partner.responsible_phone
              }}</span>
          </div>
        </div>
        <div class="contato-info d-flex flex-row">
          <i class="pi pi-at"></i>
          <div>
            <span class="info-titulo">E-mail</span>
            <br />
            <span class="info-dados">{{
              nonComplicanceService.nc.partner.responsible_email
              }}</span>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


